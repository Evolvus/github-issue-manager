import{j as s,I as R,B as C,C as _,d as k}from"./index-D9dTo_Rc.js";import{r as h}from"./react-vendor-Dku4jBrG.js";import{I as U}from"./IssueCard-WcpVEazb.js";import{S as D}from"./search-D7kZdEDu.js";import{D as G}from"./download-CDb-eUKk.js";import"./badge-Dce5Ri_g.js";import"./avatar-C9-6Q88m.js";function P(r){const l=["Number","Title","URL","State","Repository","ProjectStatus","CreatedAt","ClosedAt"],d=r.map(a=>[a.number,'"'+(a.title||"").replace(/"/g,'""')+'"',a.url||"",a.state||"",a.repository?.nameWithOwner||a.repository||"",a.project_status||"",a.createdAt||"",a.closedAt||""]);return[l.join(","),...d.map(a=>a.join(","))].join(`
`)}function Z(r,l){const d=P(r),a=new Blob([d],{type:"text/csv"}),i=URL.createObjectURL(a),n=document.createElement("a");n.href=i,n.download=l,n.click(),URL.revokeObjectURL(i)}function K({allIssuesWithStatus:r,query:l,setQuery:d,filterState:a,setFilterState:i,filterProjectStatus:n,setFilterProjectStatus:b,filterAssignee:m,setFilterAssignee:N,filterIssueType:p,setFilterIssueType:w,filterTag:x,setFilterTag:y,filterMilestone:u,setFilterMilestone:E,projectStatusOptions:A,assigneeOptions:L,issueTypeOptions:S,tagOptions:I,milestoneOptions:O}){const[j,v]=h.useState(50),c=h.useMemo(()=>{const e=l.toLowerCase();return r.filter(o=>(!a||o.state===a)&&(!n||o.project_status===n)&&(!m||(m==="(unassigned)"?o.assignees.length===0:o.assignees.some(t=>t.login===m)))&&(!p||o.issueType?.name===p)&&(!x||o.labels.some(t=>t.name===x))&&(!u||(u==="(none)"?!o.milestone:o.milestone?.title===u))&&(!e||o.title.toLowerCase().includes(e)||o.repository?.nameWithOwner?.toLowerCase().includes(e)||o.assignees.some(t=>t.login.toLowerCase().includes(e))||o.labels.some(t=>t.name.toLowerCase().includes(e))))},[r,a,n,m,p,x,u,l]);h.useEffect(()=>{v(50)},[c]);const g=h.useMemo(()=>c.slice(0,j),[c,j]);return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"mb-3 flex flex-wrap items-center gap-2",children:[s.jsxs("div",{className:"relative",children:[s.jsx(D,{className:"w-4 h-4 absolute left-2 top-1/2 -translate-y-1/2"}),s.jsx(R,{"data-quick-open":!0,placeholder:"Search issues...",value:l,onChange:e=>d(e.target.value),className:"pl-7 w-60"})]}),s.jsxs("select",{value:a,onChange:e=>i(e.target.value),className:"border rounded-md text-sm px-2 py-1",children:[s.jsx("option",{value:"",children:"All States"}),s.jsx("option",{value:"OPEN",children:"Open"}),s.jsx("option",{value:"CLOSED",children:"Closed"})]}),s.jsxs("select",{value:n,onChange:e=>b(e.target.value),className:"border rounded-md text-sm px-2 py-1",children:[s.jsx("option",{value:"",children:"All Project Statuses"}),A.map(e=>s.jsx("option",{value:e,children:e},e))]}),s.jsxs("select",{value:m,onChange:e=>N(e.target.value),className:"border rounded-md text-sm px-2 py-1",children:[s.jsx("option",{value:"",children:"All Assignees"}),L.map(e=>s.jsx("option",{value:e,children:e},e))]}),s.jsxs("select",{value:p,onChange:e=>w(e.target.value),className:"border rounded-md text-sm px-2 py-1",children:[s.jsx("option",{value:"",children:"All Types"}),S.map(e=>s.jsx("option",{value:e,children:e},e))]}),s.jsxs("select",{value:x,onChange:e=>y(e.target.value),className:"border rounded-md text-sm px-2 py-1",children:[s.jsx("option",{value:"",children:"All Tags"}),I.map(e=>s.jsx("option",{value:e,children:e},e))]}),s.jsxs("select",{value:u,onChange:e=>E(e.target.value),className:"border rounded-md text-sm px-2 py-1",children:[s.jsx("option",{value:"",children:"All Milestones"}),O.map(e=>s.jsx("option",{value:e,children:e},e))]}),s.jsxs(C,{onClick:()=>Z(c,"all-issues.csv"),className:"ml-auto text-sm",children:[s.jsx(G,{className:"w-4 h-4"})," Download"]})]}),s.jsxs("div",{className:"mb-3 text-sm text-gray-500",children:["Showing ",c.length," issues"]}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[g.map(e=>s.jsx(U,{issue:e},e.id)),!g.length&&s.jsx(_,{children:s.jsx(k,{className:"py-10",children:s.jsx("div",{className:"text-sm text-gray-500",children:"No data available."})})})]}),j<c.length&&s.jsx("div",{className:"flex justify-center",children:s.jsx(C,{variant:"outline",onClick:()=>v(e=>e+50),children:"Load More"})})]})}export{K as default};
