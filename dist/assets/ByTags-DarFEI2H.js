import{j as e,I as N,C as T,d as k}from"./index-D9dTo_Rc.js";import{r as j,u as L}from"./react-vendor-Dku4jBrG.js";import{T as y,a as E,b as m,c as d,d as S,e as c}from"./table-CYnngszr.js";import{B as D}from"./badge-Dce5Ri_g.js";import{S as O}from"./search-D7kZdEDu.js";function B(t="808080"){const r=parseInt(t.substr(0,2),16),i=parseInt(t.substr(2,2),16),u=parseInt(t.substr(4,2),16);return(.299*r+.587*i+.114*u)/255>.5?"#000000":"#ffffff"}function A({allIssues:t,query:r,setQuery:i,setFilterAssignee:u,setFilterState:x,setFilterProjectStatus:p,setFilterTag:g,setFilterIssueType:C}){const f=j.useMemo(()=>{const s=new Map;for(const l of t)if(l.labels.length)for(const a of l.labels)s.has(a.name)||s.set(a.name,{label:a,issues:[]}),s.get(a.name).issues.push(l);else{const a="(no label)";s.has(a)||s.set(a,{label:{name:a,color:"808080"},issues:[]}),s.get(a).issues.push(l)}return Array.from(s.values()).sort((l,a)=>a.issues.length-l.issues.length)},[t]),b=j.useMemo(()=>{const s=r.toLowerCase();return f.filter(l=>l.label.name.toLowerCase().includes(s))},[f,r]),v=L(),h=(s,l="",a="",o="")=>{g(s),x(l),p(a),u(o),C(""),i(""),v("/all-issues")};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("div",{className:"relative",children:[e.jsx(O,{className:"w-4 h-4 absolute left-2 top-1/2 -translate-y-1/2"}),e.jsx(N,{"data-quick-open":!0,placeholder:"Search tags...",value:r,onChange:s=>i(s.target.value),className:"pl-7 w-72"})]})}),e.jsx(T,{children:e.jsx(k,{className:"p-0",children:e.jsxs(y,{children:[e.jsx(E,{children:e.jsxs(m,{children:[e.jsx(d,{children:"Label"}),e.jsx(d,{children:"Open"}),e.jsx(d,{children:"Closed"}),e.jsx(d,{children:"Total"})]})}),e.jsxs(S,{children:[b.map(s=>{const l=s.issues.filter(n=>n.state==="OPEN").length,a=s.issues.filter(n=>n.state==="CLOSED").length,o=s.label.color||"808080";return e.jsxs(m,{children:[e.jsx(c,{children:e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(D,{style:{backgroundColor:`#${o}`,color:B(o)},children:s.label.name})})}),e.jsx(c,{children:e.jsx("a",{href:"#",className:"text-blue-600 underline",onClick:n=>{n.preventDefault(),h(s.label.name,"OPEN")},children:l})}),e.jsx(c,{children:e.jsx("a",{href:"#",className:"text-blue-600 underline",onClick:n=>{n.preventDefault(),h(s.label.name,"CLOSED")},children:a})}),e.jsx(c,{children:e.jsx("a",{href:"#",className:"text-blue-600 underline",onClick:n=>{n.preventDefault(),h(s.label.name)},children:s.issues.length})})]},s.label.name)}),!b.length&&e.jsx(m,{children:e.jsx(c,{colSpan:4,children:e.jsx("div",{className:"text-sm text-gray-500",children:"No data available."})})})]})]})})})]})}export{A as default};
